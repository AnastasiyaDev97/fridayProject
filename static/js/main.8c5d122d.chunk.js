(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{17:function(e,t,n){e.exports={appWrapper:"App_appWrapper__rjX5L",mainBlock:"App_mainBlock__3yE-n",err:"App_err__2QqvI"}},18:function(e,t,n){e.exports={inputWrapper:"UniversalInput_inputWrapper__1pOz9",input:"UniversalInput_input__1Lh8z",togglePassBtn:"UniversalInput_togglePassBtn__1McrO",error:"UniversalInput_error__32yEU"}},25:function(e,t,n){e.exports={btn:"SuperButton_btn__1J1we",red:"SuperButton_red__3tJ4H"}},26:function(e,t,n){e.exports={checkbox:"SuperCheckbox_checkbox__2cpqV",spanClassName:"SuperCheckbox_spanClassName__23i5x",labelForCheckBox:"SuperCheckbox_labelForCheckBox__3gJhp"}},27:function(e,t,n){e.exports={input:"SuperInputText_input__3wnaw",superInput:"SuperInputText_superInput__36AEF",errorInput:"SuperInputText_errorInput__26Z7d",error:"SuperInputText_error__32TC9"}},28:function(e,t,n){e.exports={headerBlock:"Header_headerBlock__2aNET",container:"Header_container__3IPHz",logout:"Header_logout__3U8OT"}},33:function(e,t,n){e.exports={blue:"TestComponents_blue__3NePE",column:"TestComponents_column__8ud9P",testSpanError:"TestComponents_testSpanError__m8w_p"}},50:function(e,t,n){},6:function(e,t,n){e.exports={wrapper:"Login_wrapper__3IxIc",form:"Login_form__2kh63",inputsWrapper:"Login_inputsWrapper__2KSMZ",row:"Login_row__dpAYZ",registrationBtns:"Login_registrationBtns__jDpW4",submitBtn:"Login_submitBtn__3Ot_n",registerLink:"Login_registerLink__28j0B"}},77:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(21),s=n.n(a),c=(n(50),n(17)),o=n.n(c),i=n(3),l=n(15),d=n(25),u=n.n(d),p=n(1),j=function(e){var t=e.red,n=e.className,r=Object(l.a)(e,["red","className"]),a="".concat(u.a.btn," ").concat(t?u.a.red:u.a.default," ").concat(n);return Object(p.jsx)("button",Object(i.a)({className:a},r))},b=n(14),m=n(26),h=n.n(m),O=function(e){e.type;var t=e.onChange,n=e.onChangeChecked,r=e.className,a=(e.spanClassName,e.children),s=Object(l.a)(e,["type","onChange","onChangeChecked","className","spanClassName","children"]),c="".concat(h.a.checkbox," ").concat(r||"");return Object(p.jsxs)("label",{className:h.a.labelForCheckBox,children:[Object(p.jsx)("input",Object(i.a)({type:"checkbox",onChange:function(e){t&&t(e),n&&n(e.currentTarget.checked)},className:c},s)),a&&Object(p.jsx)("span",{className:h.a.spanClassName,children:a})]})},f=n(5),g=n(32),x=n.n(g),_=x.a.create({baseURL:"https://neko-back.herokuapp.com/2.0",withCredentials:!0}),v=function(e,t){return _.post("auth/register",{email:e,password:t}).then((function(e){return console.log(e.data),e.data}))},w=function(e){return _.post("auth/login",e).then((function(e){return e.data}))},y=function(){return _.delete("auth/me").then((function(e){return e.data}))},k=function(){return _.post("auth/me").then((function(e){return e.data}))},N=function(e){var t={email:e,from:"test-front-admin <ai73a@yandex.by>",message:"<div style=\"background-color: lime; padding: 15px\">\npassword recovery link: <a href='https://NastyaZ23.github.io/fridayProject/new-password/$token$'>\nlink</a></div>"};return x.a.post("https://neko-back.herokuapp.com/2.0/auth/forgot",t,{withCredentials:!0}).then((function(e){return e.data}))},P={status:"idle",isInitialized:!1,error:null},S=function(e){return{type:"APP/SET-STATUS",payload:{status:e}}},I=function(e){return{type:"SET-ERROR",payload:{error:e}}},C={profile:{}},T=function(e,t){e(I(t)),e(S("failed"))},E={isLoggedIn:!1},L=function(e){return{type:"TOGGLE-IS-AUTH",payload:{isLoggedIn:e}}},A=n(2),B=n(11),F=n(6),R=n.n(F),Z=n(10),U=n(18),W=n.n(U),q=n(27),H=n.n(q),M=function(e){var t=e.type,n=e.onChange,r=e.onChangeText,a=e.onKeyPress,s=e.onEnter,c=e.error,o=e.className,d=(e.spanClassName,Object(l.a)(e,["type","onChange","onChangeText","onKeyPress","onEnter","error","className","spanClassName"])),u=Object(f.b)(),j="".concat(H.a.input," ").concat(c?H.a.errorInput:H.a.superInput," ").concat(o," ");return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("input",Object(i.a)({type:t,onChange:function(e){n&&n(e),r&&r(e.currentTarget.value),u(I(null))},onKeyPress:function(e){a&&a(e),s&&"Enter"===e.key&&s()},className:j},d))})},z=function(e){var t=Object(r.useState)(!1),n=Object(Z.a)(t,2),a=n[0],s=n[1];return Object(p.jsxs)("div",{className:W.a.inputWrapper,children:[Object(p.jsx)(M,Object(i.a)(Object(i.a)({className:W.a.input,placeholder:e.formikProps.name},e.formikProps),{},{type:!a&&e.type?"password":"text"})),e.isPassword&&Object(p.jsx)("span",{className:W.a.togglePassBtn,onClick:function(){s(!a)}}),Object(p.jsx)("div",{className:W.a.error,children:e.validationErr})]})},G=function(){var e=Object(f.b)(),t=Object(b.a)({initialValues:{email:"",password:"",rememberMe:!1},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",e.password||(t.password="Required"),t},onSubmit:function(n){var r;e((r=n,function(e){e(S("loading")),w(r).then((function(t){e(S("succeeded")),e(L(!0)),e({type:"SET-PROFILE",payload:{profile:t}})})).catch((function(t){var n=t.response?t.response.data.error:t.message+", more details in the console";T(e,n)}))})),t.resetForm()}});return Object(f.c)((function(e){return e.login.isLoggedIn}))?Object(p.jsx)(A.a,{to:"/"}):Object(p.jsxs)("div",{className:R.a.wrapper,children:[Object(p.jsx)("h2",{children:"Welcome"}),Object(p.jsxs)("form",{className:R.a.form,onSubmit:function(e){t.handleSubmit(e)},children:[Object(p.jsxs)("div",{className:R.a.inputsWrapper,children:[Object(p.jsx)(z,{validationErr:t.touched.email&&t.errors.email||"",formikProps:t.getFieldProps("email")}),Object(p.jsx)(z,{validationErr:t.touched.password&&t.errors.password||"",formikProps:t.getFieldProps("password"),type:"password",isPassword:!0})]}),Object(p.jsxs)("div",{className:R.a.row,children:[Object(p.jsx)(O,Object(i.a)(Object(i.a)({checked:t.values.rememberMe},t.getFieldProps("rememberMe")),{},{children:"Remember Me"})),Object(p.jsx)(B.b,{to:"/forgot-password",children:"Lost Password?"})]}),Object(p.jsx)(j,{className:R.a.submitBtn,type:"submit",children:"Login"})]}),Object(p.jsx)(B.b,{className:R.a.registerLink,to:"/registration",children:"Register"})]})},J=function(){return Object(f.c)((function(e){return e.login.isLoggedIn}))?Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{}),"Profile"]}):Object(p.jsx)(A.a,{to:"/login"})},$={registerStatus:!1},K=function(e){return{type:"SET-REGISTER-STATUS",payload:{registerStatus:e}}},V=function(){var e=Object(f.b)(),t=Object(b.a)({initialValues:{email:"",password:"",confirmPassword:""},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",e.password?e.password.length<8?t.password="Password must be 8 characters long.":/(?=.*[0-9])/.test(e.password)||(t.password="Invalid password. Must contain one number."):t.password="Required",e.confirmPassword||(t.confirmPassword="Required"),e.password&&e.confirmPassword&&e.password!==e.confirmPassword&&(t.confirmPassword="Password not matched"),t},onSubmit:function(n){var r,a;e((r=n.email,a=n.password,function(e){e(S("loading")),v(r,a).then((function(){e(K(!0))})).catch((function(){e(K(!1))})).finally((function(){e(S("succeeded"))}))})),t.resetForm()}});return Object(f.c)((function(e){return e.register.registerStatus}))?(e(K(!1)),Object(p.jsx)(A.a,{to:"/login"})):Object(p.jsxs)("div",{className:R.a.wrapper,children:[Object(p.jsx)("h2",{children:"Sign up"}),Object(p.jsxs)("form",{onSubmit:t.handleSubmit,className:R.a.form,children:[Object(p.jsxs)("div",{className:R.a.inputsWrapper,children:[Object(p.jsx)(z,{validationErr:t.touched.email&&t.errors.email||"",formikProps:t.getFieldProps("email")}),Object(p.jsx)(z,{validationErr:t.touched.password&&t.errors.password||"",formikProps:t.getFieldProps("password"),type:"password",isPassword:!0}),Object(p.jsx)(z,{validationErr:t.touched.confirmPassword&&t.errors.confirmPassword||"",formikProps:t.getFieldProps("confirmPassword"),type:"password",isPassword:!0})]}),Object(p.jsx)("div",{className:R.a.row,children:Object(p.jsxs)("div",{className:R.a.registrationBtns,children:[Object(p.jsx)(j,{type:"button",onClick:function(){t.resetForm()},children:"Cancel"}),Object(p.jsx)(j,{type:"submit",children:"Register"})]})})]})]})},D=function(){return Object(p.jsx)("div",{children:"NotFound"})},Q=function(){var e=Object(b.a)({initialValues:{email:""},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",t},onSubmit:function(t){N(t.email),e.resetForm()}});return Object(p.jsxs)("div",{className:R.a.wrapper,children:[Object(p.jsx)("h2",{children:"Forgot your password?"}),Object(p.jsxs)("form",{className:R.a.form,onSubmit:function(t){e.handleSubmit(t)},children:[Object(p.jsx)("div",{className:R.a.inputsWrapper,children:Object(p.jsx)(z,{validationErr:e.touched.email&&e.errors.email||"",formikProps:e.getFieldProps("email")})}),Object(p.jsx)("div",{children:"Enter your email address and we will send you further instructions"}),Object(p.jsx)(j,{className:R.a.submitBtn,type:"submit",children:"Send instructions"})]}),Object(p.jsx)("div",{children:"Do you remember your password?"}),Object(p.jsx)(B.b,{className:R.a.registerLink,to:"/login",children:"Try logging in"})]})},X=function(){return Object(p.jsx)("div",{children:"NewPassword"})},Y=n(33),ee=n.n(Y),te=function(e){var t=Object(r.useState)(""),n=Object(Z.a)(t,2),a=n[0],s=n[1],c=a?"":"error",o=function(){c?alert("\u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442..."):alert(a)},i=Object(r.useState)(!1),l=Object(Z.a)(i,2),d=l[0],u=l[1];return Object(p.jsx)("div",{children:Object(p.jsxs)("div",{className:ee.a.column,children:[Object(p.jsx)(M,{value:a,onChangeText:s,onEnter:o,error:c}),Object(p.jsx)(M,{className:ee.a.blue}),"----------------------------------------------------",Object(p.jsx)(j,{children:"default"}),Object(p.jsx)(j,{red:!0,onClick:o,children:"delete "}),Object(p.jsx)(j,{disabled:!0,children:"disabled"}),"----------------------------------------------------",Object(p.jsx)(O,{checked:d,onChangeChecked:u,children:"some text "}),Object(p.jsx)(O,{checked:d,onChange:function(e){return u(e.currentTarget.checked)}})]})})},ne=n(28),re=n.n(ne),ae=function(){var e=Object(f.b)(),t=Object(f.c)((function(e){return e.login.isLoggedIn}));return Object(p.jsx)("div",{className:re.a.headerBlock,children:Object(p.jsxs)("div",{className:re.a.container,children:[Object(p.jsx)("h2",{children:"CardsApp"}),t&&Object(p.jsx)("span",{className:re.a.logout,onClick:function(){e((function(e){e(S("loading")),y().then((function(){e(S("succeeded")),e(L(!1))})).catch((function(t){var n=t.response?t.response.data.error:t.message+", more details in the console";T(e,n)}))}))},children:"Logout"})]})})},se=n.p+"static/media/oval.d819144a.svg",ce=function(){return Object(p.jsx)("img",{src:se,alt:"waiting...",style:{width:"90px"}})};var oe=function(){var e=Object(f.c)((function(e){return e.app.status})),t=Object(f.c)((function(e){return e.app.isInitialized})),n=Object(f.c)((function(e){return e.app.error})),a=Object(f.b)();return Object(r.useEffect)((function(){a((function(e){e(S("loading")),k().then((function(t){console.log(t),e(L(!0))})).catch((function(){e(L(!1))})).finally((function(){e(S("succeeded")),e({type:"INITIALIZE"})}))}))}),[]),Object(p.jsxs)("div",{className:o.a.appWrapper,children:[Object(p.jsx)(ae,{}),Object(p.jsx)("div",{className:o.a.mainBlock,children:t&&"loading"!==e?Object(p.jsxs)(A.d,{children:[Object(p.jsx)(A.b,{path:"/",element:Object(p.jsx)(J,{})}),Object(p.jsx)(A.b,{path:"/registration",element:Object(p.jsx)(V,{})}),Object(p.jsx)(A.b,{path:"/login",element:Object(p.jsx)(G,{})}),Object(p.jsx)(A.b,{path:"/404",element:Object(p.jsx)(D,{})}),Object(p.jsx)(A.b,{path:"*",element:Object(p.jsx)(A.a,{to:"/404"})}),Object(p.jsx)(A.b,{path:"/forgot-password",element:Object(p.jsx)(Q,{})}),Object(p.jsx)(A.b,{path:"/new-password/*",element:Object(p.jsx)(X,{})}),Object(p.jsx)(A.b,{path:"/test-components",element:Object(p.jsx)(te,{})})]}):Object(p.jsx)(ce,{})}),Object(p.jsx)("div",{className:o.a.err,children:n})]})},ie=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,78)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),s(e),c(e)}))},le=n(29),de=n(45),ue=Object(le.b)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"APP/SET-STATUS":case"SET-ERROR":return Object(i.a)(Object(i.a)({},e),t.payload);case"INITIALIZE":return Object(i.a)(Object(i.a)({},e),{},{isInitialized:!0});default:return e}},login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE-IS-AUTH":return Object(i.a)(Object(i.a)({},e),t.payload);default:return e}},register:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-REGISTER-STATUS":return Object(i.a)(Object(i.a)({},e),t.payload);default:return e}},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-PROFILE":return Object(i.a)(Object(i.a)({},e),t.payload);default:return e}}}),pe=Object(le.c)(ue,Object(le.a)(de.a));console.log(pe),window.store=pe,s.a.render(Object(p.jsx)(B.a,{children:Object(p.jsx)(f.a,{store:pe,children:Object(p.jsx)(oe,{})})}),document.getElementById("root")),ie()}},[[77,1,2]]]);
//# sourceMappingURL=main.8c5d122d.chunk.js.map