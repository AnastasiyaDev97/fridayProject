(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{17:function(e,t,n){e.exports={appWrapper:"App_appWrapper__rjX5L",mainBlock:"App_mainBlock__3yE-n",err:"App_err__2QqvI"}},18:function(e,t,n){e.exports={inputWrapper:"UniversalInput_inputWrapper__1pOz9",input:"UniversalInput_input__1Lh8z",togglePassBtn:"UniversalInput_togglePassBtn__1McrO",error:"UniversalInput_error__32yEU"}},25:function(e,t,n){e.exports={btn:"SuperButton_btn__1J1we",red:"SuperButton_red__3tJ4H"}},26:function(e,t,n){e.exports={checkbox:"SuperCheckbox_checkbox__2cpqV",spanClassName:"SuperCheckbox_spanClassName__23i5x",labelForCheckBox:"SuperCheckbox_labelForCheckBox__3gJhp"}},28:function(e,t,n){e.exports={input:"SuperInputText_input__3wnaw",superInput:"SuperInputText_superInput__36AEF",errorInput:"SuperInputText_errorInput__26Z7d",error:"SuperInputText_error__32TC9"}},29:function(e,t,n){e.exports={headerBlock:"Header_headerBlock__2aNET",container:"Header_container__3IPHz",logout:"Header_logout__3U8OT"}},33:function(e,t,n){e.exports={blue:"TestComponents_blue__3NePE",column:"TestComponents_column__8ud9P",testSpanError:"TestComponents_testSpanError__m8w_p"}},5:function(e,t,n){e.exports={wrapper:"Login_wrapper__3IxIc",form:"Login_form__2kh63",inputsWrapper:"Login_inputsWrapper__2KSMZ",row:"Login_row__dpAYZ",registrationBtns:"Login_registrationBtns__jDpW4",submitBtn:"Login_submitBtn__3Ot_n",registerLink:"Login_registerLink__28j0B",sendMailBlock:"Login_sendMailBlock__1BucO",sendMailBtn:"Login_sendMailBtn__8e8z7"}},50:function(e,t,n){},77:function(e,t,n){"use strict";n.r(t);var r=n(0),s=n(21),a=n.n(s),o=(n(50),n(17)),c=n.n(o),i=n(3),l=n(15),d=n(25),u=n.n(d),p=n(1),j=function(e){var t=e.red,n=e.className,r=Object(l.a)(e,["red","className"]),s="".concat(u.a.btn," ").concat(t?u.a.red:u.a.default," ").concat(n);return Object(p.jsx)("button",Object(i.a)({className:s},r))},b=n(14),m=n(26),h=n.n(m),O=function(e){e.type;var t=e.onChange,n=e.onChangeChecked,r=e.className,s=(e.spanClassName,e.children),a=Object(l.a)(e,["type","onChange","onChangeChecked","className","spanClassName","children"]),o="".concat(h.a.checkbox," ").concat(r||"");return Object(p.jsxs)("label",{className:h.a.labelForCheckBox,children:[Object(p.jsx)("input",Object(i.a)({type:"checkbox",onChange:function(e){t&&t(e),n&&n(e.currentTarget.checked)},className:o},a)),s&&Object(p.jsx)("span",{className:h.a.spanClassName,children:s})]})},f=n(4),g=n(27),x=n.n(g),w=x.a.create({baseURL:"https://neko-back.herokuapp.com/2.0",withCredentials:!0}),v=function(e,t){return w.post("auth/register",{email:e,password:t}).then((function(e){return console.log(e.data),e.data}))},_=function(e){return w.post("auth/login",e).then((function(e){return e.data}))},y=function(){return w.delete("auth/me").then((function(e){return e.data}))},S=function(){return w.post("auth/me").then((function(e){return e.data}))},N=function(e){var t={email:e,from:"test-front-admin <ai73a@yandex.by>",message:"<div style=\"background-color: lime; padding: 15px\">\npassword recovery link: <a href='https://nastyaZ23.github.io/fridayProject/new-password#/new-password/$token$'>\nlink</a></div>"};return x.a.post("https://neko-back.herokuapp.com/2.0/auth/forgot",t,{withCredentials:!0}).then((function(e){return e.data}))},P=function(e){return x.a.post("https://neko-back.herokuapp.com/2.0/auth/set-new-password",e,{withCredentials:!0}).then((function(e){return e.data}))},k={status:"idle",isInitialized:!1,error:null},I=function(e){return{type:"APP/SET-STATUS",payload:{status:e}}},E=function(e){return{type:"SET-ERROR",payload:{error:e}}},T={profile:{}},C=function(e,t){e(E(t)),e(I("failed"))},F={isLoggedIn:!1},R=function(e){return{type:"TOGGLE-IS-AUTH",payload:{isLoggedIn:e}}},L=n(2),A=n(10),B=n(5),M=n.n(B),W=n(11),Z=n(18),U=n.n(Z),q=n(28),G=n.n(q),z=function(e){var t=e.type,n=e.onChange,r=e.onChangeText,s=e.onKeyPress,a=e.onEnter,o=e.error,c=e.className,d=(e.spanClassName,Object(l.a)(e,["type","onChange","onChangeText","onKeyPress","onEnter","error","className","spanClassName"])),u=Object(f.b)(),j="".concat(G.a.input," ").concat(o?G.a.errorInput:G.a.superInput," ").concat(c," ");return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("input",Object(i.a)({type:t,onChange:function(e){n&&n(e),r&&r(e.currentTarget.value),u(E(null))},onKeyPress:function(e){s&&s(e),a&&"Enter"===e.key&&a()},className:j},d))})},D=function(e){var t=Object(r.useState)(!1),n=Object(W.a)(t,2),s=n[0],a=n[1];return Object(p.jsxs)("div",{className:U.a.inputWrapper,children:[Object(p.jsx)(z,Object(i.a)(Object(i.a)({className:U.a.input,placeholder:e.formikProps.name},e.formikProps),{},{type:!s&&e.type?"password":"text"})),e.isPassword&&Object(p.jsx)("span",{className:U.a.togglePassBtn,onClick:function(){a(!s)}}),Object(p.jsx)("div",{className:U.a.error,children:e.validationErr})]})},H=function(){var e=Object(f.b)(),t=Object(b.a)({initialValues:{email:"",password:"",rememberMe:!1},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",e.password?e.password.length<8?t.password="Password must be 8 characters long.":/(?=.*[0-9])/.test(e.password)||(t.password="Invalid password. Must contain one number."):t.password="Required",t},onSubmit:function(n){var r;e((r=n,function(e){e(I("loading")),_(r).then((function(t){e(I("succeeded")),e(R(!0)),e({type:"SET-PROFILE",payload:{profile:t}})})).catch((function(t){var n=t.response?t.response.data.error:t.message+", more details in the console";C(e,n)}))})),t.resetForm()}});return Object(f.c)((function(e){return e.login.isLoggedIn}))?Object(p.jsx)(L.a,{to:"/"}):Object(p.jsxs)("div",{className:M.a.wrapper,children:[Object(p.jsx)("h2",{children:"Welcome"}),Object(p.jsxs)("form",{className:M.a.form,onSubmit:function(e){t.handleSubmit(e)},children:[Object(p.jsxs)("div",{className:M.a.inputsWrapper,children:[Object(p.jsx)(D,{validationErr:t.touched.email&&t.errors.email||"",formikProps:t.getFieldProps("email")}),Object(p.jsx)(D,{validationErr:t.touched.password&&t.errors.password||"",formikProps:t.getFieldProps("password"),type:"password",isPassword:!0})]}),Object(p.jsxs)("div",{className:M.a.row,children:[Object(p.jsx)(O,Object(i.a)(Object(i.a)({checked:t.values.rememberMe},t.getFieldProps("rememberMe")),{},{children:"Remember Me"})),Object(p.jsx)(A.b,{to:"/forgot-password",children:"Lost Password?"})]}),Object(p.jsx)(j,{className:M.a.submitBtn,type:"submit",children:"Login"})]}),Object(p.jsx)(A.b,{className:M.a.registerLink,to:"/registration",children:"Register"})]})},J=function(){return Object(f.c)((function(e){return e.login.isLoggedIn}))?Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{}),"Profile"]}):Object(p.jsx)(L.a,{to:"/login"})},V={registerStatus:!1},$=function(e){return{type:"SET-REGISTER-STATUS",payload:{registerStatus:e}}},K=function(){var e=Object(f.b)(),t=Object(b.a)({initialValues:{email:"",password:"",confirmPassword:""},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",e.password?e.password.length<8?t.password="Password must be 8 characters long.":/(?=.*[0-9])/.test(e.password)||(t.password="Invalid password. Must contain one number."):t.password="Required",e.confirmPassword||(t.confirmPassword="Required"),e.password&&e.confirmPassword&&e.password!==e.confirmPassword&&(t.confirmPassword="Password not matched"),t},onSubmit:function(n){var r,s;e((r=n.email,s=n.password,function(e){e(I("loading")),v(r,s).then((function(){e($(!0))})).catch((function(){e($(!1))})).finally((function(){e(I("succeeded"))}))})),t.resetForm()}});return Object(f.c)((function(e){return e.register.registerStatus}))?(e($(!1)),Object(p.jsx)(L.a,{to:"/login"})):Object(p.jsxs)("div",{className:M.a.wrapper,children:[Object(p.jsx)("h2",{children:"Sign up"}),Object(p.jsxs)("form",{onSubmit:t.handleSubmit,className:M.a.form,children:[Object(p.jsxs)("div",{className:M.a.inputsWrapper,children:[Object(p.jsx)(D,{validationErr:t.touched.email&&t.errors.email||"",formikProps:t.getFieldProps("email")}),Object(p.jsx)(D,{validationErr:t.touched.password&&t.errors.password||"",formikProps:t.getFieldProps("password"),type:"password",isPassword:!0}),Object(p.jsx)(D,{validationErr:t.touched.confirmPassword&&t.errors.confirmPassword||"",formikProps:t.getFieldProps("confirmPassword"),type:"password",isPassword:!0})]}),Object(p.jsx)("div",{className:M.a.row,children:Object(p.jsxs)("div",{className:M.a.registrationBtns,children:[Object(p.jsx)(j,{type:"button",onClick:function(){t.resetForm()},children:"Cancel"}),Object(p.jsx)(j,{type:"submit",children:"Register"})]})})]})]})},Q=function(){return Object(p.jsx)("div",{children:"NotFound"})},X={responseInfoForgotPass:"",responseInfoNewPass:"",emailForRecovery:null},Y=function(e){return{type:"SET-RESPONSE-INFO-FORGOT-PASS",payload:{responseInfoForgotPass:e}}},ee=function(e){return{type:"SET-RESPONSE-INFO-NEW-PASS",payload:{responseInfoNewPass:e}}},te=function(e){return{type:"ADD-EMAIL",payload:{emailForRecovery:e}}},ne=function(){var e=Object(f.b)(),t=Object(f.c)((function(e){return e.passRecovery.emailForRecovery})),n=Object(f.c)((function(e){return e.passRecovery.responseInfoForgotPass})),r=Object(b.a)({initialValues:{email:""},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",t},onSubmit:function(t){var n;e((n=t.email,function(e){e(I("loading")),N(n).then((function(t){e(te(n)),t.info&&e(Y(t.info))})).catch((function(t){var n=t.response?t.response.data.error:t.message+", more details in the console";C(e,n)})).finally((function(){e(I("succeeded"))}))}))}});return Object(p.jsx)("div",{className:M.a.wrapper,children:n?Object(p.jsxs)("div",{className:M.a.sendMailBlock,children:[Object(p.jsx)("h2",{children:"Check email"}),Object(p.jsxs)("div",{children:["We've sent an Email with instructions to ",t]}),Object(p.jsx)(j,{className:M.a.sendMailBtn,type:"button",onClick:function(){e(Y("")),e(te(""))},children:"Ok"})]}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h2",{children:"Forgot your password?"}),Object(p.jsxs)("form",{className:M.a.form,onSubmit:function(e){r.handleSubmit(e)},children:[Object(p.jsx)("div",{className:M.a.inputsWrapper,children:Object(p.jsx)(D,{validationErr:r.touched.email&&r.errors.email||"",formikProps:r.getFieldProps("email")})}),Object(p.jsx)("div",{children:"Enter your email address and we will send you further instructions"}),Object(p.jsx)(j,{className:M.a.submitBtn,type:"submit",children:"Send instructions"})]}),Object(p.jsx)("div",{children:"Do you remember your password?"}),Object(p.jsx)(A.b,{className:M.a.registerLink,to:"/login",children:"Try logging in"})]})})},re=function(){var e=Object(f.b)(),t=Object(L.h)()["*"],n=Object(f.c)((function(e){return e.passRecovery.responseInfoNewPass})),r=Object(b.a)({initialValues:{password:""},validate:function(e){var t={};return e.password?e.password.length<8?t.password="Password must be 8 characters long.":/(?=.*[0-9])/.test(e.password)||(t.password="Invalid password. Must contain one number."):t.password="Required",t},onSubmit:function(n){var r,s={password:n.password,resetPasswordToken:t||""};e((r=s,function(e){e(I("loading")),P(r).then((function(t){t.info&&e(ee(t.info))})).catch((function(t){var n=t.response?t.response.data.error:t.message+", more details in the console";C(e,n)})).finally((function(){e(I("succeeded"))}))}))}});return n?(e(ee("")),Object(p.jsx)(L.a,{to:"/login"})):Object(p.jsxs)("div",{className:M.a.wrapper,children:[Object(p.jsx)("h2",{children:"Create new password"}),Object(p.jsxs)("form",{className:M.a.form,onSubmit:function(e){r.handleSubmit(e)},children:[Object(p.jsx)("div",{className:M.a.inputsWrapper,children:Object(p.jsx)(D,{validationErr:r.touched.password&&r.errors.password||"",formikProps:r.getFieldProps("password"),type:"password",isPassword:!0})}),Object(p.jsx)(j,{className:M.a.submitBtn,type:"submit",children:"Create new password"})]})]})},se=n(33),ae=n.n(se),oe=function(e){var t=Object(r.useState)(""),n=Object(W.a)(t,2),s=n[0],a=n[1],o=s?"":"error",c=function(){o?alert("\u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442..."):alert(s)},i=Object(r.useState)(!1),l=Object(W.a)(i,2),d=l[0],u=l[1];return Object(p.jsx)("div",{children:Object(p.jsxs)("div",{className:ae.a.column,children:[Object(p.jsx)(z,{value:s,onChangeText:a,onEnter:c,error:o}),Object(p.jsx)(z,{className:ae.a.blue}),"----------------------------------------------------",Object(p.jsx)(j,{children:"default"}),Object(p.jsx)(j,{red:!0,onClick:c,children:"delete "}),Object(p.jsx)(j,{disabled:!0,children:"disabled"}),"----------------------------------------------------",Object(p.jsx)(O,{checked:d,onChangeChecked:u,children:"some text "}),Object(p.jsx)(O,{checked:d,onChange:function(e){return u(e.currentTarget.checked)}})]})})},ce=n(29),ie=n.n(ce),le=function(){var e=Object(f.b)(),t=Object(f.c)((function(e){return e.login.isLoggedIn}));return Object(p.jsx)("div",{className:ie.a.headerBlock,children:Object(p.jsxs)("div",{className:ie.a.container,children:[Object(p.jsx)("h2",{children:"CardsApp"}),t&&Object(p.jsx)("span",{className:ie.a.logout,onClick:function(){e((function(e){e(I("loading")),y().then((function(){e(I("succeeded")),e(R(!1))})).catch((function(t){var n=t.response?t.response.data.error:t.message+", more details in the console";C(e,n)}))}))},children:"Logout"})]})})},de=n.p+"static/media/oval.d819144a.svg",ue=function(){return Object(p.jsx)("img",{src:de,alt:"waiting...",style:{width:"90px"}})};var pe=function(){var e=Object(f.c)((function(e){return e.app.status})),t=Object(f.c)((function(e){return e.app.isInitialized})),n=Object(f.c)((function(e){return e.app.error})),s=Object(f.b)();return Object(r.useEffect)((function(){s((function(e){e(I("loading")),S().then((function(t){console.log(t),e(R(!0))})).catch((function(){e(R(!1))})).finally((function(){e(I("succeeded")),e({type:"INITIALIZE"})}))}))}),[]),Object(p.jsxs)("div",{className:c.a.appWrapper,children:[Object(p.jsx)(le,{}),Object(p.jsx)("div",{className:c.a.mainBlock,children:t&&"loading"!==e?Object(p.jsxs)(L.d,{children:[Object(p.jsx)(L.b,{path:"/",element:Object(p.jsx)(J,{})}),Object(p.jsx)(L.b,{path:"/registration",element:Object(p.jsx)(K,{})}),Object(p.jsx)(L.b,{path:"/login",element:Object(p.jsx)(H,{})}),Object(p.jsx)(L.b,{path:"/404",element:Object(p.jsx)(Q,{})}),Object(p.jsx)(L.b,{path:"/forgot-password",element:Object(p.jsx)(ne,{})}),Object(p.jsx)(L.b,{path:"/new-password/*",element:Object(p.jsx)(re,{})}),Object(p.jsx)(L.b,{path:"/test-components",element:Object(p.jsx)(oe,{})}),Object(p.jsx)(L.b,{path:"*",element:Object(p.jsx)(L.a,{to:"/404"})})]}):Object(p.jsx)(ue,{})}),Object(p.jsx)("div",{className:c.a.err,children:n})]})},je=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,78)).then((function(t){var n=t.getCLS,r=t.getFID,s=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),s(e),a(e),o(e)}))},be=n(30),me=n(45),he=Object(be.b)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"APP/SET-STATUS":case"SET-ERROR":return Object(i.a)(Object(i.a)({},e),t.payload);case"INITIALIZE":return Object(i.a)(Object(i.a)({},e),{},{isInitialized:!0});default:return e}},login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE-IS-AUTH":return Object(i.a)(Object(i.a)({},e),t.payload);default:return e}},register:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-REGISTER-STATUS":return Object(i.a)(Object(i.a)({},e),t.payload);default:return e}},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-PROFILE":return Object(i.a)(Object(i.a)({},e),t.payload);default:return e}},passRecovery:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-RESPONSE-INFO-FORGOT-PASS":case"SET-RESPONSE-INFO-NEW-PASS":case"ADD-EMAIL":return Object(i.a)(Object(i.a)({},e),t.payload);default:return e}}}),Oe=Object(be.c)(he,Object(be.a)(me.a));console.log(Oe),window.store=Oe,a.a.render(Object(p.jsx)(A.a,{children:Object(p.jsx)(f.a,{store:Oe,children:Object(p.jsx)(pe,{})})}),document.getElementById("root")),je()}},[[77,1,2]]]);
//# sourceMappingURL=main.e7fdbd58.chunk.js.map