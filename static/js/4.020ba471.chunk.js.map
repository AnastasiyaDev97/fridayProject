{"version":3,"sources":["pages/Login/Login.module.scss","enums/ErrorMessage.ts","utils/validates.ts","utils/error-utils.ts","enums/FormikFieldName.ts","pages/Login/index.tsx"],"names":["module","exports","ERROR_MESSAGE","passwordRegex","checkEmail","values","errors","email","test","INVALID_EMAIL","REQUIRED","checkPassword","password","length","SHORT_PASSWORD","NEED_NUMBER","validates","confirmPassword","NOT_MATCHED","checkConfirmPassword","validateLoginForm","validateForgotPasswordForm","validateNewPasswordForm","errorHandler","dispatch","setErrorText","errorText","setAppStatus","status","FORMIK_FIELDS_NAME","Login","useAppDispatch","location","useLocation","useLoginMutation","login","loginData","data","isLoginError","isError","isLoggedIn","useAppSelector","state","auth","fromPage","from","pathname","userEmail","emailFromRegister","useEffect","setLoginStatus","setProfileData","formik","useFormik","initialValues","rememberMe","validate","onSubmit","conditionForDisableButton","to","className","styles","wrapper","form","handleSubmit","inputsWrapper","validationErr","touched","EMPTY_STRING","formikProps","getFieldProps","EMAIL","PASSWORD","type","checked","REMEMBER_ME","submitBtn","disabled","row","registerLink","PATH","REGISTER","FORGOT_PASSWORD"],"mappings":"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","file":"static/js/4.020ba471.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Login_wrapper__2x3h7\",\"form\":\"Login_form__1Y1Hi\",\"inputsWrapper\":\"Login_inputsWrapper__3uV0P\",\"registrationBtns\":\"Login_registrationBtns__egO9s\",\"submitBtn\":\"Login_submitBtn__2rn6V\",\"registerLink\":\"Login_registerLink__1o25-\",\"row\":\"Login_row__Et2_Y\",\"sendMailBlock\":\"Login_sendMailBlock__3_DYD\",\"sendMailBtn\":\"Login_sendMailBtn__3L4Rz\",\"sendMailMessage\":\"Login_sendMailMessage__1FO15\",\"registerBtn\":\"Login_registerBtn__1q6kn\"};","export enum ERROR_MESSAGE {\r\n  INVALID_EMAIL = 'Invalid email address',\r\n  REQUIRED = 'Required',\r\n  SHORT_PASSWORD = 'Password must be 8 characters long',\r\n  NEED_NUMBER = 'Invalid password. Must contain one number',\r\n  NOT_MATCHED = 'Password not matched',\r\n}\r\n","import { ERROR_MESSAGE } from 'enums/ErrorMessage';\r\n\r\nexport type AuthData = {\r\n  email?: string;\r\n  password?: string;\r\n  confirmPassword?: string;\r\n};\r\n\r\ntype valuesRegisterForm = {\r\n  email?: string;\r\n  password?: string;\r\n  confirmPassword?: string;\r\n};\r\n\r\nconst minPasswordLength = 8;\r\nconst passwordRegex = /(?=.*[0-9])/;\r\nconst checkEmail = (values: valuesRegisterForm, errors: AuthData): void => {\r\n  if (!values.email) {\r\n    errors.email = ERROR_MESSAGE.REQUIRED;\r\n  } else if (!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(values.email)) {\r\n    errors.email = ERROR_MESSAGE.INVALID_EMAIL;\r\n  }\r\n};\r\n\r\nconst checkPassword = (values: valuesRegisterForm, errors: AuthData): void => {\r\n  if (!values.password) {\r\n    errors.password = ERROR_MESSAGE.REQUIRED;\r\n  } else if (values.password.length < minPasswordLength) {\r\n    errors.password = ERROR_MESSAGE.SHORT_PASSWORD;\r\n  } else if (!passwordRegex.test(values.password)) {\r\n    errors.password = ERROR_MESSAGE.NEED_NUMBER;\r\n  }\r\n};\r\n\r\nconst checkConfirmPassword = (values: valuesRegisterForm, errors: AuthData): void => {\r\n  if (!values.confirmPassword) {\r\n    errors.confirmPassword = ERROR_MESSAGE.REQUIRED;\r\n  }\r\n  if (values.password && values.confirmPassword) {\r\n    if (values.password !== values.confirmPassword) {\r\n      errors.confirmPassword = ERROR_MESSAGE.NOT_MATCHED;\r\n    }\r\n  }\r\n};\r\n\r\nexport const validates = (values: valuesRegisterForm, errors: AuthData): void => {\r\n  checkEmail(values, errors);\r\n  checkPassword(values, errors);\r\n  checkConfirmPassword(values, errors);\r\n};\r\n\r\nexport const validateLoginForm = (values: valuesRegisterForm, errors: AuthData): void => {\r\n  checkEmail(values, errors);\r\n  checkPassword(values, errors);\r\n};\r\n\r\nexport const validateForgotPasswordForm = (\r\n  values: valuesRegisterForm,\r\n  errors: AuthData,\r\n): void => {\r\n  checkEmail(values, errors);\r\n};\r\n\r\nexport const validateNewPasswordForm = (\r\n  values: valuesRegisterForm,\r\n  errors: AuthData,\r\n): void => {\r\n  checkPassword(values, errors);\r\n};\r\n","import { AppDispatch } from 'store';\r\nimport { setAppStatus, setErrorText } from 'store/reducers/app';\r\n\r\nexport const catchErrorHandler = (dispatch: AppDispatch, err: any): void => {\r\n  dispatch(setErrorText({ errorText: err?.response ? err?.response?.data?.error : err }));\r\n  dispatch(setAppStatus({ status: 'failed' }));\r\n};\r\n\r\nexport const errorHandler = (dispatch: AppDispatch): void => {\r\n  dispatch(setErrorText({ errorText: 'Something went wrong' }));\r\n  dispatch(setAppStatus({ status: 'failed' }));\r\n};\r\n","export enum FORMIK_FIELDS_NAME {\r\n  REMEMBER_ME = 'rememberMe',\r\n  EMAIL = 'email',\r\n  PASSWORD = 'password',\r\n  NAME = 'name',\r\n  CONFIRM_PASSWORD = 'confirmPassword',\r\n}\r\n","import { useEffect } from 'react';\r\n\r\nimport { useFormik } from 'formik';\r\nimport { Navigate, NavLink, useLocation } from 'react-router-dom';\r\n\r\nimport styles from './Login.module.scss';\r\n\r\nimport { ReturnComponentType } from 'common/types/ReturnComponentType';\r\nimport { SuperButton, SuperCheckbox, UniversalInput } from 'components';\r\nimport { EMPTY_STRING } from 'constants/index';\r\nimport { useLoginMutation } from 'dal/authorization';\r\nimport { FORMIK_FIELDS_NAME } from 'enums/FormikFieldName';\r\nimport { PATH } from 'enums/Path';\r\nimport { useAppDispatch, useAppSelector } from 'store';\r\nimport { setLoginStatus, setProfileData } from 'store/reducers';\r\nimport { errorHandler } from 'utils/error-utils';\r\nimport { AuthData, validateLoginForm } from 'utils/validates';\r\n\r\nconst Login = (): ReturnComponentType => {\r\n  const dispatch = useAppDispatch();\r\n  const location = useLocation();\r\n\r\n  const [login, { data: loginData, isError: isLoginError }] = useLoginMutation();\r\n\r\n  const isLoggedIn = useAppSelector(state => state.auth.isLoggedIn);\r\n\r\n  const fromPage = location?.state?.from?.pathname || '/';\r\n  const userEmail: string = location?.state?.emailFromRegister;\r\n\r\n  useEffect(() => {\r\n    if (loginData) {\r\n      dispatch(setLoginStatus(true));\r\n      dispatch(setProfileData(loginData));\r\n    }\r\n    if (isLoginError) {\r\n      errorHandler(dispatch);\r\n    }\r\n  }, [loginData, dispatch, isLoginError]);\r\n\r\n  const formik = useFormik({\r\n    initialValues: {\r\n      email: userEmail || /* (process.env.REACT_APP_EMAIL as string) ||  */ '',\r\n      password: /* (process.env.REACT_APP_PASSWORD as string) || */ '',\r\n      rememberMe: false,\r\n    },\r\n    validate: values => {\r\n      const errors: AuthData = {};\r\n\r\n      validateLoginForm(values, errors);\r\n\r\n      return errors;\r\n    },\r\n    onSubmit: values => {\r\n      login(values);\r\n    },\r\n  });\r\n\r\n  const conditionForDisableButton = !!(formik.errors.email || formik.errors.password);\r\n\r\n  if (isLoggedIn) {\r\n    return <Navigate to={fromPage} />;\r\n  }\r\n\r\n  return (\r\n    <div className={styles.wrapper}>\r\n      <h2>Welcome</h2>\r\n      <form className={styles.form} onSubmit={formik.handleSubmit}>\r\n        <div className={styles.inputsWrapper}>\r\n          <UniversalInput\r\n            validationErr={(formik.touched.email && formik.errors.email) || EMPTY_STRING}\r\n            formikProps={formik.getFieldProps(FORMIK_FIELDS_NAME.EMAIL)}\r\n          />\r\n\r\n          <UniversalInput\r\n            validationErr={\r\n              (formik.touched.password && formik.errors.password) || EMPTY_STRING\r\n            }\r\n            formikProps={formik.getFieldProps(FORMIK_FIELDS_NAME.PASSWORD)}\r\n            type=\"password\"\r\n          />\r\n        </div>\r\n\r\n        <SuperCheckbox\r\n          checked={formik.values.rememberMe}\r\n          {...formik.getFieldProps(FORMIK_FIELDS_NAME.REMEMBER_ME)}\r\n        >\r\n          Remember Me\r\n        </SuperCheckbox>\r\n\r\n        <SuperButton\r\n          className={styles.submitBtn}\r\n          type=\"submit\"\r\n          disabled={conditionForDisableButton}\r\n        >\r\n          Login\r\n        </SuperButton>\r\n      </form>\r\n      <div className={styles.row}>\r\n        <NavLink className={styles.registerLink} to={PATH.REGISTER}>\r\n          Register\r\n        </NavLink>\r\n        <NavLink className={styles.registerLink} to={PATH.FORGOT_PASSWORD}>\r\n          Lost Password?\r\n        </NavLink>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"],"sourceRoot":""}